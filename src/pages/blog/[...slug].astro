---
import type { CollectionEntry } from "astro:content"
import { getCollection } from "astro:content"
import Layout from '@/layouts/Layout.astro'

export async function getStaticPaths() {
	const posts = await getCollection('blog')
		return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

type Props = CollectionEntry<"blog">;

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
	<a href="/blog" class="flex items-center gap-1 my-6">
		{'<'}
		<span>Back</span>
	</a>
	<div class="mb-8">
		<h1 class="text-3xl">
			{post.data.title}
		</h1>
		<p class="text-neutral-500 dark:text-neutral-400 mt-1 mb-6">
			<span>
				{post.data.date.toLocaleDateString()}
			</span>
			{' | '}
			{post.data.categories.map(category => (
				<span
					class={`
						inline-block text-sm rounded-md mr-2
						bg-neutral-200 dark:bg-neutral-700 px-1
					`}
				>
					{category}
				</span>
			))}
		</p>
	</div>
	<div
		class={`
			prose prose-neutral prose-lg dark:prose-invert
			prose-img:rounded-lg prose-img:shadow-md prose-img:mx-auto
			prose-video:rounded-lg prose-video:shadow-md prose-video:mx-auto
			prose-code:bg-neutral-300 dark:prose-code:bg-neutral-700
			prose-code:rounded-md prose-code:px-1 prose-code:py-0.5
			prose-figcaption:mt-1 prose-figcaption:text-center
		`}
	>
		<Content />
	</div>
</Layout>
